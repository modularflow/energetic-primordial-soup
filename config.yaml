# BFF Primordial Soup Simulation Configuration
# =============================================
#
# Edit this file to customize your simulation.
# Run with: ./target/release/energetic-primordial-soup --config config.yaml
#
# Or use run_sim.sh: CONFIG_FILE=config.yaml ./run_sim.sh

# Grid dimensions
# The simulation runs on a 2D toroidal grid
grid:
  width: 1024      # Grid width in programs
  height: 512     # Grid height in programs

# Core simulation parameters
simulation:
  seed: 42                # Random seed for reproducibility
  mutation_rate: 4096     # 1 in N chance per byte (higher = less mutation)
  steps_per_run: 8192     # BFF execution steps per epoch
  max_epochs: 50000      # Total epochs to run
  neighbor_range: 2       # Pairing range (2 = 5x5 neighborhood)
  auto_terminate_dead_epochs: 0   # Terminate if all dead for N epochs (0=disabled, has GPU overhead)
  parallel_sims: 8        # Run N simulations in parallel on GPU (1=single)

# Output settings
output:
  frame_interval: 256      # Save frame every N epochs (0 = disabled)
  frames_dir: frames      # Output directory for frames

# Energy System
# Controls which programs can mutate based on proximity to "energy sources"
energy:
  enabled: true          # Set to true to enable energy system
  sources: 8              # Initial number of sources (1-8)
                          # 4=corners, 5=+center, 6=+edges, 8=all
  radius: 128              # Radius of each energy source
  reserve_epochs: 50       # Energy reserve when leaving zone
  death_epochs: 100        # Epochs without interaction until death
  
  # Dynamic Energy Settings
  # Make energy sources spawn, move, and expire over time
  dynamic:
    random_placement: true   # Randomize source positions
    max_sources: 20            # Maximum simultaneous sources
    source_lifetime: 10000       # Epochs until source expires (0 = infinite)
    spawn_rate: 5000             # Spawn new source every N epochs (0 = disabled)

# =============================================
# EXAMPLE CONFIGURATIONS
# =============================================
#
# --- Basic simulation (no energy) ---
# energy:
#   enabled: false
#
# --- Static corner energy sources ---
# energy:
#   enabled: true
#   sources: 4
#   radius: 64
#
# --- Dynamic random sources ---
# energy:
#   enabled: true
#   sources: 4
#   radius: 40
#   dynamic:
#     random_placement: true
#     max_sources: 8
#     source_lifetime: 500
#     spawn_rate: 100
#
# --- Aggressive mutation with energy islands ---
# simulation:
#   mutation_rate: 1024
# energy:
#   enabled: true
#   sources: 6
#   radius: 48
#   reserve_epochs: 3
#   death_epochs: 5

